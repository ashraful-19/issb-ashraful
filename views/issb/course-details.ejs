

<%- include('../partials/header.ejs') %>
<style>
  .con,.course-content-list {
  position: relative;
  bottom: -10px;
  height: auto;
  border: none;
}


div.accordion {
width: 100%;
border:none;
 border-bottom:1px solid #f6f6f600;
 border: 1px solid rgb(244, 244, 244) ;
outline: none;
text-align: left;
padding: 10px 15px;
font-size: 14px;
color: #444;
cursor: pointer;
transition: background-color 0.2s linear;
display: flex;
justify-content: flex-start;
flex-direction: row;
align-items: center;
border-radius:5px;

}



.accordion-content {


max-height: 0;
overflow: hidden;
position:relative;
 top:-5px;
transition: max-height 0.3s ease-in-out;
background-color: #f4f4f461;
display: flex;
flex-direction: column;

 border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;


}
.accordion-content a,.accordion-content p{
  
  width: 100%;
  padding: 3px 12px;
  margin: 8px auto;
  font-size: 14px;
  color: #737373;
border:none;
  
}
.accordion-content a:hover,.accordion-content p:hover{
  background:#ededed;
  cursor: pointer;
}

.accordion-content a:last-child,.accordion-content p:last-child{
margin-bottom:10px;
}
.accordion-content a:first-child,.accordion-content p:first-child{
margin-top:10px;
}
.tabcontent{
margin: 8px;

}

.accordion img{
  width: 22px;
  margin-right: 10px;
}
ul, ol {
  margin: 0;
  padding: 0;
  list-style-type: none;
}
</style>
<section class="top-nav">

	<div id="top-nav-left">
	<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg>
 </div>
<div>
	<a id="militarian"	href="/"><h3>Militarian</h3></a>
</div>
</section>
<div id="menulist" >
	<a href="/">Home</a>
	<a href="about.html">About</a>
	<a href="contact.html">Contact</a>
	<a href="termandcondition.html">Terms & conditions</a>
	<a href="policy.html">Policy</a>
    <% if (req.user) { %>
        <a href="/auth/logout">Logout</a>
      <% } else { %>
        <a href="/auth/login">Login</a>
      <% } %>
      
</div>
<br><br><br>

<section class="course-details">

    <div class="course-video">
        <div class="course-video-container-svg">
          <iframe id="videosvg" width="100%" height="100%" src="<%= course.course_ads %>?autoplay=0" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="image-container-svg">
          <img class="course-slideimg" src="<%= course.thumbnail %>">
          <svg id="play-btn" width="65" height="65" viewBox="0 0 65 65" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="32.5" cy="32.5" r="32.5" fill="white" fill-opacity="0.5" />
            <ellipse cx="32.4991" cy="32.5011" rx="20.546" ry="20.546" fill="white" />
            <path d="M41.0035 32.128C41.2901 32.2935 41.2901 32.7072 41.0035 32.8727L28.5673 40.0527C28.2807 40.2182 27.9223 40.0114 27.9223 39.6803L27.9223 25.3203C27.9223 24.9893 28.2807 24.7824 28.5673 24.9479L41.0035 32.128Z" fill="#EC1F27" />
          </svg>
        </div>
      </div>
      <div class="course-video">
        <h3><%= course.course_name %></h3>
       
        <div class="course-lectures">
          <ul>
            <li><i class="fas fa-video"></i> 50 Live Class</li>
            <li><i class="fas fa-file-pdf"></i> 453 Enrolled</li>
            <li><i class="fas fa-pen"></i> 50 Exams</li>
            <li><i class="fas fa-clipboard-check"></i>10 Slides</li>
            <li><i class="fas fa-desktop"></i>Problem Solving</li>
          </ul>
                  
        </div>
        <style>
 

        </style>
        <br>
        <div class="bar"></div>
        <div class="instructors course-content">
          <h4>ক্লাস নিবেন যারা</h4>
          <div class="instructor-container">
            <div class="instructor-details">
              <img src="https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTB8fGh1bWFufGVufDB8fDB8fA%3D%3D&w=1000&q=80" alt=" Picture" class="instructor-img">
              <div class="instructor-info">
                <p class="instructor-name">Md Ashraful Islam</p>
                <p class="instructor-phone">CALCUTTA UNIVERSITY, DU, BUET (10+ YEARS EXP)</p>
                <p class="instructor-email">IQ TEST</p>
              </div>
            </div>
          </div>   
          <div class="instructor-container">
            <div class="instructor-details">
              <img src="https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTB8fGh1bWFufGVufDB8fDB8fA%3D%3D&w=1000&q=80" alt=" Picture" class="instructor-img">
              <div class="instructor-info">
                <p class="instructor-name">Md Ashraful Islam</p>
                <p class="instructor-phone">CALCUTTA UNIVERSITY, DU, BUET (10+ YEARS EXP)</p>
                <p class="instructor-email">IQ TEST</p>
              </div>
            </div>
          </div>   

        </div>
        <div class="bar"></div>
        <div class="learnings course-content">
          <h4>কোর্সটি করে যা শিখবেন</h4>
          <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Impedit saepe veniam, iusto consectetur soluta nisi atque, provident ipsum ipsa rerum dicta alias accusantium dolorem. Ullam earum assumenda, quasi eius nam eveniet molestiae nisi reprehenderit similique, repudiandae, qui quibusdam omnis deleniti cumque perferendis animi quam minima ex repellendus! Corporis nobis quis fugit quidem dolorum adipisci quisquam itaque soluta aliquid est neque tempora suscipit laborum repellendus corrupti voluptatem obcaecati doloribus tenetur earum magni, numquam excepturi nulla rem. In cum laborum aliquam ad enim doloremque natus dicta, eveniet recusandae accusamus. Reprehenderit ducimus magni velit dignissimos eos rem delectus! Deserunt dicta illo nisi amet?</p>
        </div>
        <div class="bar"></div>
        <div class="about-details course-content">
          <h4>কোর্স সম্পর্কে বিস্তারিত</h4>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore earum dicta molestiae voluptate officiis quas illo animi placeat, qui praesentium quod assumenda, rem sapiente repellat omnis ratione delectus quibusdam ab! Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet sapiente aliquam pariatur nihil excepturi! Atque vero mollitia blanditiis eligendi vitae similique. Error, amet et dolorem voluptate assumenda facere facilis temporibus!</p>
        </div>
        <div class="bar"></div>

        <div class="lecture-details course-content">
          <h4>লেকচার ডিটেইলস</h4>
          <section class="course-content-list">
            <% for (const syllabusItem of course.course_syllabus) { %>
              <div class="tabcontent hide-show" style="margin: 8px 0px;">
                <div class="accordion" style="padding: 15px 10px;"> 
                  <img src="<%= syllabusItem.course_content_icon_url %>" alt="">

                  <span><%= syllabusItem.course_content_title %></span>
                  <i class="fa-solid fa-angle-down angle-right"></i>
                </div>
                <div class="accordion-content">
                  <% const detailsArray = syllabusItem.course_content_details ? JSON.parse(syllabusItem.course_content_details) : []; %>
            
                  <% for (const detail of detailsArray) { %>
                    <% if (detail.type === 'video') { %>
                      <p data-link="<%= detail.link %>" class="video"><i class="fa-regular fa-circle-play"></i>&nbsp;&nbsp;<%= detail.title %></p>
                    <% } else if (detail.type === 'pdf') { %>
                      <p data-link="<%= detail.link %>"><i class="fa-regular fa-file-lines"></i>&nbsp;&nbsp;<%= detail.title %></p>
                    <% } else { %>
                      <p data-link="<%= detail.link %>"><i class="fa-regular fa-rectangle-list"></i>&nbsp;&nbsp;<%= detail.title %></p>
                    <% } %>
                  <% } %>
                </div>
              </div>
            <% } %>
            
 
      <button class="show-more">Show More<i class="fa-solid fa-angle-down angle-right"></i></button>
      
    </section> 
    </div>
<div class="bar"></div>         
       
        <div class="payment-process course-content">
          <h4>যেভাবে পেমেন্ট করবেন</h4>
          কিভাবে পেমেন্ট করবেন তা বিস্তারিত জানতে এই ভিডিওটি দেখুন
        </div>
        <div class="bar"></div>
        
        
        
        <div class="general-asking course-content">
          <h4>সাধারণ জিজ্ঞাসা</h4>
          <section class="course-content-list">
            <div class="tabcontent hide-show" style="margin: 8px 0px;">
                <div class="accordion" style="padding: 15px 10px;"> 
                  <img src="https://cdn.iconscout.com/icon/free/png-256/free-success-632-1177828.png?f=webp" alt="">
                
                    <span>   Intelligence Test </span>
                    <i class="fa-solid fa-angle-down angle-right"></i>
                </div>
                <div class="accordion-content">
                   <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Explicabo, iusto? Quas beatae delectus veniam rerum omnis at accusantium repellat officiis cupiditate. Porro est provident, quasi dolores dicta neque consequuntur! Et laudantium provident inventore deleniti similique est incidunt in tempore molestiae commodi harum cumque beatae praesentium, cupiditate aperiam non placeat sed error iusto quas adipisci ipsam pariatur laborum quasi! Perspiciatis soluta dicta debitis, eum iure incidunt ipsam aliquid, officiis ratione laudantium aperiam molestias eveniet fugit rerum harum. Vel delectus explicabo, esse velit exercitationem optio ipsum ratione beatae facilis illum in rerum aspernatur impedit necessitatibus ut dolore porro? Animi minus saepe amet!</p>
                </div>
            </div>
            
          
            <div class="tabcontent" style="margin: 8px 0px;">
              <div class="accordion hide-show" style="padding: 15px 10px;">
                  <span>   যদি পিপিডিতে হেরে জাই তাহলে কি করবো </span>
                  <i class="fa-solid fa-angle-down angle-right"></i>
              </div>
              <div class="accordion-content">
                 
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Explicabo, iusto? Quas beatae delectus veniam rerum omnis at accusantium repellat officiis cupiditate. Porro est provident, quasi dolores dicta neque consequuntur! Et laudantium provident inventore deleniti similique est incidunt in tempore molestiae commodi harum cumque beatae praesentium, cupiditate aperiam non placeat sed error iusto quas adipisci ipsam pariatur laborum quasi! Perspiciatis soluta dicta debitis, eum iure incidunt ipsam aliquid, officiis ratione laudantium aperiam molestias eveniet fugit rerum harum. Vel delectus explicabo, esse velit exercitationem optio ipsum ratione beatae facilis illum in rerum aspernatur impedit necessitatibus ut dolore porro? Animi minus saepe amet! </p>
              </div>
          </div>
          
          <div class="tabcontent hide-show" style="margin: 8px 0px;">
            <div class="accordion" style="padding: 15px 10px;"> 
                <span>   Intelligence Test </span>
                <i class="fa-solid fa-angle-down angle-right"></i>
            </div>
            <div class="accordion-content">
       
              <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Explicabo, iusto? Quas beatae delectus veniam rerum omnis at accusantium repellat officiis cupiditate. Porro est provident, quasi dolores dicta neque consequuntur! Et laudantium provident inventore deleniti similique est incidunt in tempore molestiae commodi harum cumque beatae praesentium, cupiditate aperiam non placeat sed error iusto quas adipisci ipsam pariatur laborum quasi! Perspiciatis soluta dicta debitis, eum iure incidunt ipsam aliquid, officiis ratione laudantium aperiam molestias eveniet fugit rerum harum. Vel delectus explicabo, esse velit exercitationem optio ipsum ratione beatae facilis illum in rerum aspernatur impedit necessitatibus ut dolore porro? Animi minus saepe amet! </p>
            </div>
        </div>
        
        <div class="tabcontent hide-show" style="margin: 8px 0px;">
          <div class="accordion" style="padding: 15px 10px;">
              <span>   Intelligence Test </span>
              <i class="fa-solid fa-angle-down angle-right"></i>
          </div>
          <div class="accordion-content">
             
            <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Explicabo, iusto? Quas beatae delectus veniam rerum omnis at accusantium repellat officiis cupiditate. Porro est provident, quasi dolores dicta neque consequuntur! Et laudantium provident inventore deleniti similique est incidunt in tempore molestiae commodi harum cumque beatae praesentium, cupiditate aperiam non placeat sed error iusto quas adipisci ipsam pariatur laborum quasi! Perspiciatis soluta dicta debitis, eum iure incidunt ipsam aliquid, officiis ratione laudantium aperiam molestias eveniet fugit rerum harum. Vel delectus explicabo, esse velit exercitationem optio ipsum ratione beatae facilis illum in rerum aspernatur impedit necessitatibus ut dolore porro? Animi minus saepe amet! </p>
          </div>
      </div>
       
      <div class="tabcontent hide-show" style="margin: 8px 0px;">
        <div class="accordion" style="padding: 15px 10px;"> 
            <span>   Intelligence Test </span>
            <i class="fa-solid fa-angle-down angle-right"></i>
        </div>
        <div class="accordion-content">
          
          <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Explicabo, iusto? Quas beatae delectus veniam rerum omnis at accusantium repellat officiis cupiditate. Porro est provident, quasi dolores dicta neque consequuntur! Et laudantium provident inventore deleniti similique est incidunt in tempore molestiae commodi harum cumque beatae praesentium, cupiditate aperiam non placeat sed error iusto quas adipisci ipsam pariatur laborum quasi! Perspiciatis soluta dicta debitis, eum iure incidunt ipsam aliquid, officiis ratione laudantium aperiam molestias eveniet fugit rerum harum. Vel delectus explicabo, esse velit exercitationem optio ipsum ratione beatae facilis illum in rerum aspernatur impedit necessitatibus ut dolore porro? Animi minus saepe amet! </p>
        </div>
    </div>
    <button class="show-more">Show More<i class="fa-solid fa-angle-down angle-right"></i></button>
  </section> 
</div>

    <div class="lecture-details course-content">
      <h4>Details</h4>
      <section class="course-content-list">
    
          <div class="tabcontent hide-show" style="margin: 8px 0px;">
            <div class="accordion" style="padding: 15px 10px;"> 
              <img src="" alt="">

              <span>This is the next part</span>
              <i class="fa-solid fa-angle-down angle-right"></i>
            </div>
            <div class="accordion-content">
              
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque impedit incidunt excepturi illum in? Quaerat quae vitae molestias exercitationem veniam? Ab inventore vitae dolore excepturi quis, explicabo impedit beatae totam sapiente, animi exercitationem, nisi doloribus nam cupiditate doloremque dicta. At esse et minima dolores tenetur adipisci, iste ipsum consequatur sint!</p>
              
            
            </div>
          </div>
     
        
  <button class="show-more">Show More<i class="fa-solid fa-angle-down angle-right"></i></button>
  
</section> 
</div>





<style>
.modal-iframe {
  display: none;
   position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  outline:none;
  border:none;
  width: 100%;
  margin: 0px auto;
  z-index: 133330;
  box-shadow: 0 0 0 99999px rgb(0 0 0 / 70%);
 background:  rgb(0 0 0 / 90%);
}
</style>
<div class="modal-section">
	<div class="modal-iframe">
        <iframe id="video-iframe" width="100%" height="100%" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media;" allowfullscreen></iframe>
  </div>
</div>
<br><br><br>

<div class="bottom-pay">
  <span>$<%= course.course_fee %></span> <span> <a href="/payment?course_id=<%= course.course_id %>">কোর্সটি কিনুন</a></span>
</div>



<script src="/js/script.js"></script>
<!-- Jquery Cnd minified -->
  <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>





<script>



const playBtn = document.getElementById('play-btn');
    const imageContainer = document.querySelector('.image-container-svg');
    const videoContainer = document.querySelector('.course-video-container-svg');
    const video = document.getElementById('videosvg');
    
    playBtn.addEventListener('click', () => {
      imageContainer.style.display = 'none';
      videoContainer.style.display = 'block';
      video.src += "&autoplay=1";
    });

// Wait for 5 seconds and then add the 'animate' class to the playBtn
setTimeout(() => {
  playBtn.classList.add('animate');
}, 1000);



var accordions = document.getElementsByClassName("accordion");
var contents = document.getElementsByClassName("accordion-content");
contents[0].previousElementSibling.querySelector('.angle-right').classList.add('rotate');
// Set the first accordion to be open by default
accordions[0].classList.add('is-open');
contents[0].style.maxHeight = "100%";
for (var i = 0; i < accordions.length; i++) {
  accordions[i].onclick = function() {
    // Toggle open class
    this.classList.toggle('is-open');

    // Get the corresponding accordion content element
    var content = this.nextElementSibling;

    // Hide other accordion content elements
    for (var j = 0; j < contents.length; j++) {
      if (contents[j] !== content) {
        contents[j].style.maxHeight = null;
        contents[j].previousElementSibling.classList.remove('is-open');
        var lastItem = contents[j].previousElementSibling.querySelector('.angle-right');
        if (lastItem) {
          lastItem.classList.remove('rotate');
        }
      }
    }

    // Toggle max-height and transition on the clicked accordion content element
    if (content.style.maxHeight) {
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
    content.style.transition = "max-height 0.2s ease-out";

    // Toggle rotate class on the last item of the clicked accordion element
    var lastItem = this.querySelector('.angle-right');
    if (lastItem) {
      lastItem.classList.toggle('rotate');
    }
  }
}







$(document).ready(function() {
      // Toggle menu when top-nav-left is clicked
      $("#top-nav-left").click(function() {
        $("#menulist").toggle();
      });
    
      // Hide menu when user clicks anywhere on the body
      $("body").click(function(event) {
        if(!$(event.target).closest("#top-nav-left, #menulist").length) {
          $("#menulist").hide();
        }
      });
    });
    

const accordionContents = document.querySelectorAll('.accordion-content');

// loop through each element starting from the second one
for (let i = 1; i < accordionContents.length; i++) {
  // select all child anchor tags and add the "locked" class to all except the first one
  const childAnchors = accordionContents[i].querySelectorAll('p');
  for (let j = 1; j < childAnchors.length; j++) {
    childAnchors[j].classList.add('locked');
    
    // add a lock icon to the anchor tag's content
    childAnchors[j].innerHTML += '<i class="fas fa-lock"></i>';
    // disable the anchor tag
    childAnchors[j].removeAttribute('href');

  }
}


  	
let modal = $('.modal-iframe');

$('.accordion-content p:not(.locked)').each(function() {
  $(this).click(function() {
    let link = $(this).data('link');
    $('.modal-iframe iframe').attr('src', link+"?autoplay=1");
    $('.modal-iframe').fadeIn(0);
    console.log('this is modal open ');
  });
});

$(document).mousedown(function(event) {
  if (!$(event.target).closest(".modal-iframe").length && !$(event.target).is('.accordion-content p:not(.locked)')) {
    $('.modal-iframe').fadeOut(100);
    $('.modal-iframe iframe').attr('src', "");
  }
});


document.addEventListener('DOMContentLoaded', function () {
  const sections = document.querySelectorAll('.course-content-list');
console.log(sections)
  sections.forEach(section => {
    const subs = section.querySelectorAll('.hide-show');
    const button = section.querySelector('.show-more');
    const maxVisible = 2;

    // hide all subs except the first one
    for (let i = maxVisible; i < subs.length; i++) {
      subs[i].style.display = 'none';
    }

    // toggle subs and button text on click
    button.addEventListener('click', function() {
      for (let i = maxVisible; i < subs.length; i++) {
        subs[i].style.display = subs[i].style.display === 'none' ? 'block' : 'none';
      }
      button.textContent = button.textContent === 'Show More' ? 'Show Less' : 'Show More';
    });

    // hide the button if there is 1 or fewer subs
    if (subs.length <= maxVisible) {
      button.style.display = 'none';
    }
  });
});

</script>